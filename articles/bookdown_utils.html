<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BookdownUtils: an opinionated approach to building a collaborative bookdown book • BookdownUtils</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="BookdownUtils: an opinionated approach to building a collaborative bookdown book">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">BookdownUtils</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/bookdown_utils.html">BookdownUtils: an opinionated approach to building a collaborative bookdown book</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/seandavi/BookdownUtils">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>BookdownUtils: an opinionated approach to building a collaborative bookdown book</h1>
                        <h4 class="author">Add author name</h4>
            <address class="author_afil">
      Add affiliation<br><h4 class="author">Sean Davis</h4>
            <address class="author_afil">
      Center for Cancer Research, National Cancer Institute, National Institutes of Health, Bethesda, MD<br><a class="author_email" href="mailto:#"></a><a href="mailto:seandavi@gmail.com">seandavi@gmail.com</a>
      </address>
                  
      
      <small class="dont-index">Source: <a href="https://github.com/seandavi/BookdownUtils/blob/master/vignettes/bookdown_utils.Rmd"><code>vignettes/bookdown_utils.Rmd</code></a></small>
      <div class="hidden name"><code>bookdown_utils.Rmd</code></div>

    </address>
</div>

    
        <div class="abstract">
      <p class="abstract">Abstract</p>
      Description of your vignette
    </div>
    
<div id="overview" class="section level1">
<h1 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h1>
<p>The <em><a href="https://CRAN.R-project.org/package=bookdown">bookdown</a></em> package can be used to build gitbook books from multiple R markdown documents. The process for doing so is well-documented for a single user with a directory of R markdown documents.</p>
<p>A more complicated use case includes some additional requirements.</p>
<ul>
<li>The materials and R packages required to successfully run the materials in the book should be installable, including dependencies.</li>
<li>Book chapters will be authored by individual contributors and each should be able to control when new content is merged into the book while still being able to work independently on their own materials.</li>
<li>Contributions from each user should themselves be versioned, coupled to a particular version of the book, and potentially decoupled from the book to include or exclude content.</li>
<li>Individual chapters and (and should) be incorporated into individual installable R packages so that R dependencies, code, and extended documentation can be included.</li>
<li>The bookdown “parent” repository will depend on the packages from individual contributors. Installing the “parent” repository will lead to versioned installations of each “chapter” repository.</li>
</ul>
</div>
<div id="high-level-implementation" class="section level1">
<h1 class="hasAnchor">
<a href="#high-level-implementation" class="anchor"></a>High-level implementation</h1>
<ul>
<li>Parent package
<ul>
<li>DESCRIPTION file
<ul>
<li>contains Depends for each chapter package</li>
<li>contains Remotes for each chapter package, ideally tied to individual tag, branch, or commit.</li>
</ul>
</li>
<li>_bookdown.yml
<ul>
<li>contains <code>rmd_files</code> tag that lists <code>.Rmd</code> file locations–<strong>these vignettes will be located in git submodules as described next</strong>
</li>
</ul>
</li>
<li>
<code>workshops</code> directory
<ul>
<li>contains git submodules<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> for each chapter package</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div id="contributor-workflow" class="section level1">
<h1 class="hasAnchor">
<a href="#contributor-workflow" class="anchor"></a>Contributor workflow</h1>
<div id="creating-the-package-and-vignette" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-the-package-and-vignette" class="anchor"></a>Creating the package and vignette</h2>
<ul>
<li>Create a normal R package.</li>
<li>Create a <code>vignettes</code> directory</li>
<li>Create your vignette as PACKAGENAME.Rmd (use same capitalization, etc. as your package name)</li>
<li>Create a <strong>FOLDER</strong> within the <code>vignettes</code> directory named <em>exactly</em> as your package. Place any files specific to your vignettes in that folder (bibliography, images, etc.).</li>
<li>When writing your vignette, reference any additional files from the folder above.</li>
</ul>
<p>Finally, create a soft link between the <code>vignettes</code> directory and the <code>inst</code> directory. For example, in the top level directory of your package do:</p>
<pre><code>mkdir inst
ln -s vignettes inst/vignettes</code></pre>
<p>After this, commit to git if desired. Installing your package will now include the vignette directory and all supporting vignette files. For a package named <code>CoolWorkshopPackage</code>, in R, this code will get to the installed vignette materials:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list.files">dir</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="dt">package=</span><span class="st">'CoolWorkshopPackage'</span>, <span class="st">'vignettes'</span>))</a></code></pre></div>
</div>
</div>
<div id="editor-workflow" class="section level1">
<h1 class="hasAnchor">
<a href="#editor-workflow" class="anchor"></a>Editor workflow</h1>
<ul>
<li>Create fork of Parent package</li>
<li>Do local testing.</li>
<li>Pull request.</li>
<li>???? Can we use github actions to perform CI/CD?</li>
</ul>
</div>
<div id="howtos" class="section level1">
<h1 class="hasAnchor">
<a href="#howtos" class="anchor"></a>HOWTOs</h1>
<div id="set-up-a-parent-package" class="section level2">
<h2 class="hasAnchor">
<a href="#set-up-a-parent-package" class="anchor"></a>Set up a <code>Parent</code> package</h2>
</div>
<div id="add-a-new-chapter-and-chapter-package" class="section level2">
<h2 class="hasAnchor">
<a href="#add-a-new-chapter-and-chapter-package" class="anchor"></a>Add a new chapter and chapter package</h2>
</div>
<div id="update-a-chapter-and-chapter-package" class="section level2">
<h2 class="hasAnchor">
<a href="#update-a-chapter-and-chapter-package" class="anchor"></a>Update a chapter and chapter package</h2>
</div>
<div id="build-the-book" class="section level2">
<h2 class="hasAnchor">
<a href="#build-the-book" class="anchor"></a>Build the book</h2>
</div>
</div>
<div id="questions" class="section level1">
<h1 class="hasAnchor">
<a href="#questions" class="anchor"></a>Questions</h1>
<ul>
<li>What happens when the vignette contains extra files?</li>
<li>What happens with references?</li>
<li>Do we need to muck with the <code>yaml</code> front matter before building vignettes?</li>
<li>Can/should we use a <code>dotfile</code> in the child chapter packages to signal where the vignette is located, or should we store that detail in the <code>_bookdown.yml</code> file directly?</li>
</ul>
</div>
<div id="authoring-notes" class="section level1">
<h1 class="hasAnchor">
<a href="#authoring-notes" class="anchor"></a>Authoring notes</h1>
<div id="style-macros" class="section level2">
<h2 class="hasAnchor">
<a href="#style-macros" class="anchor"></a>Style macros</h2>
<p><em>BiocStyle</em> introduces the following macros for referring to <em>R</em> packages:</p>
<ul>
<li>
<em><a href="https://bioconductor.org/packages/3.9/IRanges">IRanges</a></em>, for <em>Bioconductor</em> software, annotation and experiment data packages,</li>
<li>
<em><a href="https://CRAN.R-project.org/package=data.table">data.table</a></em>, for <em>R</em> packages available on CRAN,</li>
<li>
<em><a href="https://github.com/rstudio/rmarkdown">rmarkdown</a></em>, for <em>R</em> packages available on GitHub,</li>
<li>
<em>MyPkg</em>, for <em>R</em> packages that are <em>not</em> available on <em>Bioconductor</em>, CRAN or GitHub.</li>
</ul>
</div>
</div>
<div id="session-info" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#session-info" class="anchor"></a>Session info</h1>
<pre><code>## R Under development (unstable) (2019-01-14 r75992)
## Platform: x86_64-apple-darwin15.6.0 (64-bit)
## Running under: macOS Mojave 10.14.2
## 
## Matrix products: default
## BLAS: /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRblas.0.dylib
## LAPACK: /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRlapack.dylib
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] BiocStyle_2.11.0
## 
## loaded via a namespace (and not attached):
##  [1] Rcpp_1.0.1         rstudioapi_0.10    knitr_1.22        
##  [4] xml2_1.2.0         magrittr_1.5       roxygen2_6.1.1    
##  [7] MASS_7.3-51.4      R6_2.4.0           rlang_0.3.4       
## [10] stringr_1.4.0      tools_3.6.0        xfun_0.6          
## [13] htmltools_0.3.6    commonmark_1.7     yaml_2.2.0        
## [16] digest_0.6.18      assertthat_0.2.1   rprojroot_1.3-2   
## [19] bookdown_0.9       pkgdown_1.3.0      crayon_1.3.4      
## [22] BiocManager_1.30.4 fs_1.2.7           memoise_1.1.0     
## [25] evaluate_0.13      rmarkdown_1.12     stringi_1.4.3     
## [28] compiler_3.6.0     desc_1.2.0         backports_1.1.3</code></pre>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>see <a href="https://www.vogella.com/tutorials/GitSubmodules/article.html">a tutorial</a> and <a href="https://git-scm.com/book/en/v2/Git-Tools-Submodules">git documentation</a> for using git submodules.<a href="#fnref1" class="footnote-back">↩</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#overview">Overview</a></li>
      <li><a href="#high-level-implementation">High-level implementation</a></li>
      <li>
<a href="#contributor-workflow">Contributor workflow</a><ul class="nav nav-pills nav-stacked">
<li><a href="#creating-the-package-and-vignette">Creating the package and vignette</a></li>
      </ul>
</li>
      <li><a href="#editor-workflow">Editor workflow</a></li>
      <li>
<a href="#howtos">HOWTOs</a><ul class="nav nav-pills nav-stacked">
<li><a href="#set-up-a-parent-package">Set up a <code>Parent</code> package</a></li>
      <li><a href="#add-a-new-chapter-and-chapter-package">Add a new chapter and chapter package</a></li>
      <li><a href="#update-a-chapter-and-chapter-package">Update a chapter and chapter package</a></li>
      <li><a href="#build-the-book">Build the book</a></li>
      </ul>
</li>
      <li><a href="#questions">Questions</a></li>
      <li>
<a href="#authoring-notes">Authoring notes</a><ul class="nav nav-pills nav-stacked">
<li><a href="#style-macros">Style macros</a></li>
      </ul>
</li>
      <li><a href="#session-info">Session info</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Sean Davis.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
